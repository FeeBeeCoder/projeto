{% extends 'base.html' %}

{% block title %}ONGs{% endblock %}

{% block content %}
<section id="ongs">
    <h2>ONGs Cadastradas</h2>
    <p>Descubra ONGs cadastradas e suas causas.</p>

    <!-- Formulário de Filtro -->
    <form method="GET" action="{{ url_for('ongs') }}" class="filter-form">
        <label for="causa">Filtrar por Causa:</label>
        <select id="causa" name="causa">
            <option value="">Todas</option>
            {% for causa in causas %}
            <option value="{{ causa['causa'] }}" {% if request.args.get('causa') == causa['causa'] %}selected{% endif %}>
                {{ causa['causa'] }}
            </option>
            {% endfor %}
        </select>

        <label for="estado">Filtrar por Estado:</label>
        <select id="estado" name="estado">
            <option value="">Todos</option>
            {% for estado in estados %}
            <option value="{{ estado }}" {% if request.args.get('estado') == estado %}selected{% endif %}>
                {{ estado }}
            </option>
            {% endfor %}
        </select>

        <label for="necessidade">Filtrar por Necessidade:</label>
        <select id="necessidade" name="necessidade">
            <option value="">Todas</option>
            {% for necessidade in necessidades %}
            <option value="{{ necessidade['tipo'] }}" {% if request.args.get('necessidade') == necessidade['tipo'] %}selected{% endif %}>
                {{ necessidade['tipo'] }}
            </option>
            {% endfor %}
        </select>

        <button type="submit">Filtrar</button>
    </form>

    <!-- Lista de ONGs -->
    <div class="ong-list">
        {% for ong in ongs %}
        <div class="ong-card">
            <figure>
                <img src="{{ url_for('static', filename=ong['logo']) }}" alt="Logo da ONG {{ ong['nome'] }}" class="ong-logo">
            </figure>
            <h3>{{ ong['nome'] }}</h3>
            <p><strong>Causa:</strong> {{ ong['causa'] }}</p>
            <p><strong>Necessidade:</strong> {{ ong['tipo'] }}</p>
            <p><strong>Localização:</strong> {{ ong['cidade'] }}, {{ ong['estado'] }}</p>
            <p><strong>Telefone:</strong> {{ ong['telefone'] }}</p> 
            <p><strong>Celular:</strong> {{ ong['celular'] }}</p>

            <a href="{{ url_for('avaliar_ong', id_ong=ong['id_ONG']) }}">Avaliar ONG</a> |
            <a href="{{ url_for('avaliacoes', id_ong=ong['id_ONG']) }}">Ver Avaliações</a>
        </div>
        {% else %}
        <p>Nenhuma ONG encontrada com os filtros aplicados.</p>
        {% endfor %}
    </div>
</section>

<style>
     .filter-form {
        margin-bottom: 1.5rem;
    }

    .ong-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        padding: 2rem 0;
    }

    .ong-card {
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 1rem;
        text-align: center;
    }

    .ong-logo {
        width: 150px;
        height: 150px;
        object-fit: cover;
        border-radius: 50%;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        margin: 0 auto;
        display: block;
    }

    .ong-card h3 {
        color: #004b4e;
        margin-bottom: 0.5rem;
    }

    .ong-card p {
        color: #555;
        margin-bottom: 0.5rem;
    }

    .ong-card a {
        text-decoration: none;
        color: #007575;
        font-weight: bold;
        margin-right: 10px;
        transition: color 0.3s ease;
    }

    .ong-card a:hover {
        color: #004b4e;
    }

    .ong-card button {
        margin-top: 0.5rem;
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 4px;
        background-color: #007575;
        color: #fff;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .ong-card button:hover {
        background-color: #004b4e;
</style>
{% endblock %}
